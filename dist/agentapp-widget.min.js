!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports):"function"==typeof define&&define.amd?define(["exports"],t):t(e.AgentAppWidgetSDK={})}(this,function(e){"use strict";var t,n,r,o,i,a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=(t={},n=null,r={},o=function(e){var t=RegExp("[?&]"+e+"=([^&#]*)").exec(window.location.href);return t?t[1]||0:null},i=function(e){var r=e;return r.plugin_id=(n||(n=o("plugin_id")),n),parent.postMessage(r,t.targetOrigin||"*")},window.addEventListener("message",function(e){if(!["http://my.lc:3000","https://my.labs.livechatinc.com","https://my.staging.livechatinc.com","https://my.livechatinc.com"].includes(e.origin))return console.log("incorrect origin"),!1;switch(e.data.event_name){case"livechat:customer_profile":return!!r.customer_profile&&function(){for(var t=[],n=Array.isArray(i=r.customer_profile),o=0,i=n?i:i[Symbol.iterator]();;){var a;if(n){if(o>=i.length)break;a=i[o++]}else{if((o=i.next()).done)break;a=o.value}t.push(a(e.data.event_data))}return t}();case"livechat:customer_profile_hidden":return!!r.customer_profile_hidden&&function(){for(var t=[],n=Array.isArray(i=r.customer_profile_hidden),o=0,i=n?i:i[Symbol.iterator]();;){var a;if(n){if(o>=i.length)break;a=i[o++]}else{if((o=i.next()).done)break;a=o.value}t.push(a(e.data.event_data))}return t}()}}),{init:function(){i({message:"plugin_inited"})},on:function(e,t){return r[e]||(r[e]=[]),r[e].push(t)},track:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return"string"==typeof e&&"object"===(void 0===t?"undefined":a(t))&&i({message:"track",data:{event_name:e,event_properties:t}})},refreshSessionId:function(){return i({message:"plugin_loaded"})},getSessionId:function(){return null},putMessage:function(e){return i({message:"put_message",data:e})}});e.default=u,Object.defineProperty(e,"__esModule",{value:!0})});
